<html>
	<head>
		<script src="jquery.js"></script>
		<script>
			class txt
			{
				constructor(t)
				{
					this.tags=t;
					this.url="https://gelbooru.com/index.php?page=post&s=list&tags="+this.tags+"&pid=0";
					loadPage(this.url);
					
					this.perPage=dt.getElementsByClassName("thumbnail-container").item(0).children.length;
					alert(this.perPage);
					var pages=dt.getElementsByClassName("pagination").item(0).children;
					alert(pages.length);
					if(pages.length>1){
					var pagestrs=pages.item(pages.length-1).getAttribute("href").split("=");
					this.total=Number(pagestrs[pagestrs.length-1]);
					alert(total);
					var lastURL="https://gelbooru.com/index.php?page=post&s=list&tags="+this.tags+"&pid="+this.total;
					loadPage(lastURL);
					this.total+=Number(dt.getElementsByClassName("thumbnail-container").item(0).children.length);
					alert(total);
					}
					
				}
			}
			var vals;
			var list;
			var button;
			var audio;
			var perPage,total
			function addBox()
			{
				var el=document.createElement("li");
				list.appendChild(el);
				var box=document.createElement("input");
				box.setAttribute("type","text");
				el.appendChild(box);
			}
			function removeGUI()
			{
				var nodes=document.body.childNodes;
				nodes.forEach(function(n,i,l){document.body.removeChild(n)});
			}
			function initGUI()
			{
				list=document.createElement("ol");
				document.body.appendChild(list);	
				
				addBox();
				var box=document.createElement("input");
				box.setAttribute("type","button");
				box.setAttribute("onclick","initG()");
				list.childNodes.item(0).appendChild(box);
			}
			
			function reset()
			{
				removeGUI();
				initGUI();		
				
			}
			var dt;
			function loadPage(url)
			{
				var f='https://cors-anywhere.herokuapp.com/'+url;
								
				 $.ajax({ url: f, success: function(data) {
	      	  	  
	  			var dom=new DOMParser();
	  			dt=dom.parseFromString(data,"text/html");
					 
					 },async: false});
				if(dt==null)alert("ERROR: "+f);
				
			}
			function initG()
			{
				removeGUI();
				var tags=list.childNodes.item(0).children.item(0).value;
				alert(tags);
				
				audio = document.createElement("AUDIO");
				var url1="https://freesound.org/data/previews/26/26777_128404-lq.mp3";
				audio.setAttribute("src",url1);
				document.body.appendChild(audio);
				
				var tt=new txt(tags);
				
				
			}
			
		</script>
	</head>

<body>
	aylmaoooo
   <script>
       reset();

      
       

    
  </script>

<body>
</html>
